# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура приложения


## Паттерн проектирования
В данной проеткной работе используется паттерн MVP (Model-View-Presenter), который разделяет приложения на 3 основных компонента:
1. Модель. Она служит для представления данных и бизнес-логики приложения. Ее основная задача заключается в выполнении операций, таких как чтение и запись данных, обработка бизнес-логики, а также взаимодействие с базой данных или внешними источниками информации.
2. Представление (View). Оно демонстрирует данные пользователю и обрабатывает его ввод. Представление служит пользовательским интерфейсом, посредством которого осуществляется взаимодействие пользователя с приложением.
3. Презентер (Presenter). Является посредником между моделью и представлением. Он содержит бизнес-логику приложения и управляет взаимодействием между моделью и представлением. Презентер получает данные от модели, форматирует их и передаёт представлению для отображения. Он также обрабатывает пользовательский ввод, передавая соответствующие команды модели для обновления данных.

## Интерфейсы для данных

**определяем тип для категории товара**
type ProductCategory = 'софт-скил' | 'другое' | 'дополнительное' | 'кнопка' | 'хард-скил';

**Интерфейс для карточки товара**
interface IProduct {
  id: string;  //  идентификатор товара
  image: string;  // изображение товара
  title: string;  // наименование товара
  category: ProductCategory;  // категория продукта
  price: number | null;  // цена товара
  description?: string;  // описание товара
}

**Интерфейс для списка товаров на главной страницы**
interface ProductList {
  productList: IProduct[];  // массив товаров
}

**Интерфейс для корзины**
interface OrderBasket {
  basketItems: IProduct[]; // массив товаров в корзине
  totalPrice: number; // общая сумма заказа в корзине
}

**Интерфейс для заказа**
interface OrderForm {
  basket: OrderBasket;  // выбранные товары(массив товаров)
  paymentMethod: string;  // метод оплаты
  address: string;  // адрес доставки
  email: string;  // почта пользователя
  phone: string;  // телефон пользователя
}

## Описание базовых классов

**Класс Api** предназначен для упрощения работы с HTTP-запросами к серверу. Он предоставляет методы для выполнения GET- и POST-запросов (включая PUT и DELETE) и обработки ответов от сервера. Класс инкапсулирует базовый URL сервера и настройки запросов, что делает взаимодействие с API более удобным

handleResponse() - обрабатывает ответ от сервера
get() - выполняет GET-запрос к серверу
post() - Выполняет POST-, PUT- или DELETE-запрос к серверу

**Класс Component<T>** - базовый класс для создания компонентов пользовательского интерфейса. Он предоставляет инструменты для работы с DOM-элементами, такие как управление классами, текстовым содержимым, видимостью, блокировкой и изображениями. Класс абстрактный, поэтому используется только через наследование

 toggleClass() - переключает класс у указанного DOM-элемента
 setText() - устанавливает текстовое содержимое указанного DOM-элемента
 setImage() - устанавливает изображение и альтернативный текст для указанного элемента <img>
 render() - Обновляет состояние компонента и возвращает корневой DOM-элемент

 **Класс EventEmitter** предназначен для взаимодействия с событиями

 on() - подписывает обработчик на указанное событие
 off() - отписывает обработчик от указанного события
 emit() - инициирует событие с данными
 onAll() - подписывает обработчик на все события
 offAll() - Сбрасывает все обработчики события
 trigger() - создает триггер, который при вызове инициирует указанное событие.

## Слой модель

**Класс ApiModel** отвечает за взаимодействие с сервером. Он наследуется от класса Api и предоставляет методы для получения данных о товарах и отправки данных на сервер
class ApiModel
  **поля:**
  baseUrl: string - базовый URL API, к которому будут отправляться запросы
  **методы:**
  constructor(baseUrl: string) - конструктор для инициализации базового URL API
  getList() - возвращает массив данных карточек с помощью get-запроса
  post() - отправляет данные на сервер

**Класс ProductModel** отвечает за хранение и управление данными о товарах. Он предоставляет список товаров, которые пользователь может просматривать и добавлять в корзину
class ProductModel
  **поля:**
  productList: IProduct[] - конструктор для инициализации массива товаров, загруженных с сервера
  **методы:**
  constructor(products: IProduct[]) - принимает массив товаров, загруженных с сервера
  getProduct() - возвращает список товаров, которые не добавлены в корзину

**Класс BasketModel** отвечает за хранение данных о корзине. Он управляет товарами, которые пользователь добавил в корзину, и рассчитывает общую сумму заказа
class BasketModel
  **поля:**
  basket: OrderBasket — объект, хранящий товары в корзине
  totalPrice: number - общая сумма заказа
  **методы:**
  constructor() - конструктор для инициализации объекта корзины и общей стоимости заказа
  addProduct() - добавляет товар в корзину
  removeProduct() - удаляет товар из корзины
  getBasket() - возвращает текущее состояние корзины
  sumOrder() - подсчитывает и выводит общую сумму заказа в корзине
  getTotalPrice() - возвращает общую сумму заказа
  clearBasket() - очищает корзину (удаляет все товары и сбрасывает сумму заказа)

**Класс OrderModel** отвечает за хранение данных, которые пользователь вводит при оформлении заказа. Он управляет способом оплаты, адресом доставки и контактными данными
class FormModel
  **поля:**
  order: OrderForm — объект, хранящий данные о заказе
  **методы:**
  constructor() - Конструктор для инициализации объекта заказа с данными о способе оплаты и контактной информации
  setPaymentMethod(method: string) - устанавливает способ оплаты
  setAddress(address: string) - устанавливает адрес доставки
  setContacts(email: string, phone: string) - устанавливает контактные данные пользователя
  resetOrder() - сбрасывает данные заказа (очищает корзину, способ оплаты, адрес и контактные данные)
  completeOrder() - отмечает заказ как успешно оформленный

## Слой представления

**class Modal** Базовый класс для всех модальных окон. Отвечает за общую функциональность для открытия и закрытия модальных окон.
class Model
  **поля:**
  modalElement: HTMLElement - элемент, представляющий модальное окно на странице
  content: HTMLElement - содержимое модального окна
  **методы:**
  open() - открывает модальное окно
  close() - закрывает модальное окно
  renderModal() - отображает модальное окно на экране

**Класс MainPageView** отображает главную страницу с карточками товаров и иконкой корзины
class MainPageView
  **поля:**
  productListContainer: HTMLElement — контейнер для отображения списка карточек товаров
  basketIcon: HTMLElement — иконка корзины, отображающая количество товаров
  basketCounter: HTMLElement — элемент, отображающий количество товаров в корзине
  basketIcon: HTMLElement -  иконка корзины, отображающая количество товаров
  **методы:**
  renderProductList(products: IProduct[]) - отображает список карточек товаров
  basketCounter: HTMLElement — элемент, отображающий количество товаров в корзине
  updateBasketIcon(count: number) - обновляет иконку корзины, отображая количество товаров
  openBasketMainPage: HTMLButtonElement - кнопка для открытия корзины

**Класс ProductView** отображает карточку товара на главной странице
  **поля:**
  categoryElement: HTMLElement - элемент, отображающий категорию товара
  titleElement: HTMLElement - элемент, отображающий название товара
  imageElement: HTMLElement - элемент, отображающий изображение товара
  priceElement: HTMLElement - элемент, отображающий цену товара
  **методы:**
  renderProduct() - отображает карточку товара

**Класс ProductDetailsView** отображает подробную информацию о товаре в модальном окне
  **поля:**
  descriptionElement: HTMLElement - элемент, отображающий описание товара
  addToBasketButton: HTMLButtonElement — кнопка, которая перемещает товар в корзину
  **методы:**
  render() - отображает подробную информацию о товаре

**Класс BasketView** 
  **поля:**
  basketList: HTMLElement — элемент, отображающий список товаров в корзине
  totalPriceElement: HTMLElement — элемент, отображающий общую сумма заказа
  checkoutButton: HTMLButtonElement — кнопка "Оформить заказ"
  **методы:**
  renderBasket() - отображает содержимое корзины

**Класс PaymentView** отображает форму выбора способа оплаты и ввода адреса доставки
  **поля:**
  paymentMethodButtons: HTMLButtonElement — кнопки выбора способа оплаты
  addressInput: HTMLInputElement — поле ввода адреса доставки
  nextButton: HTMLButtonElement — кнопка "Далее"
  **методы:**
  render() - отображает форму выбора способа оплаты и ввода адреса

**Класс ContactsView** отображает форму ввода контактных данных (email и телефон)
  **поля:**
  emailInput: HTMLInputElement — поле ввода email
  phoneInput: HTMLInputElement — поле ввода телефона
  submitButton: HTMLButtonElement — кнопка "Оплатить"
  **методы:**
  render() - отображает форму выбора способа оплаты и ввода адреса

**Класс SuccessView** отображает сообщение об успешном оформлении заказа
  **поля:**
  successMessage: HTMLElement — элемент, отображающий сообщение об успешном оформлении
  continueButton: HTMLButtonElement — кнопка "За новыми покупками"
  **методы:**
  render() - отображает сообщение об успешном оформлении заказа

## Слой презентер
**Используется событийно-ориентированный подход. Каждое действие пользователя инициирует событие, которое обрабатывается презентером. Презентер взаимодействует с моделью для обновления данных и с представлением для отображения изменений. Этот класс не будет вынесен в отдельный файл, а останется в основном скрипте приложения**

## Взаимодействие компонентов
product:select - возникает, когда пользователь выбирает товар
product:add-to-basket - возникает, когда пользователь добавляет товар в корзину
basket:open -  возникает, когда пользователь открывает корзину
order:submit - возникает, когда пользователь оформляет заказ
modal:close - возникает, когда пользователь закрывает модальное окно
modal:open - возникает, когда пользователь открывает модальное окно
